<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	th:replace="~{adminBase::layout(~{::section})}">
<head>
<meta charset="ISO-8859-1">
<title>Insert title here</title>
</head>
<body>
	<section>
		<div class="page-wrapper">
					<div class="page-content">
						<div class="row row-cols-1 row-cols-md-2 row-cols-lg-2 row-cols-xl-4">

							
							
							<div class="col">
								<a href="/admin/products">
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div>
												<p class="mb-0">Total Products</p>
												<h5 class="mb-0">[[${totalProductCount}]]</h5>
											</div>
											<div class="ms-auto text-white">	<i class='bx bx-cart font-30'></i>
											</div>
										</div>
										
									</div>
								</div>
								</a>
							</div>
							<div class="col">
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div>
												<p class="mb-0">Total Income</p>
												<h5 class="mb-0" id="simplifiedCount">  &#8377;  [[${totalIncome}]]</h5>
											</div>
											<div class="ms-auto text-white">	<i class='bx bx-wallet font-30'></i>
											</div>
										</div>
										
									</div>
								</div>
							</div>
							
							<div class="col">
								<a href="/admin/users?type=1">
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div>
												<p class="mb-0">Total Users</p>
												<h5 class="mb-0" id="simplifiedCount">[[${countType1}]]</h5>
											</div>
											<div class="ms-auto text-white">	<i class="bx bx-user font-30"></i><span>
											</div>
										</div>
										
									</div>
								</div>
								</a>
							</div>
							<div class="col">
								<a href="/admin/users?type=2">
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div>
												<p class="mb-0">Total Sellers</p>
												<h5 class="mb-0" id="simplifiedCount">[[${countType2}]]</h5>
											</div>
											<div class="ms-auto text-white">	<i class='bx bx-store font-30'></i>
											</div>
										</div>
										
									</div>
								</div>
								</a>
							</div>
							<div class="col">
								
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div>
												<p class="mb-0">Total Orders</p>
												<h5 class="mb-0" id="simplifiedCount">[[${totalElements}]]</h5>
											</div>
											<div class="ms-auto text-white">	<i class='bx bx-cart font-30'></i>
											</div>
										</div>
										
									</div>
								</div>
								
							</div>
							<div class="col">
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div>
												<p class="mb-0">Pending Orders</p>
												<h5 class="mb-0" id="simplifiedCount">[[${totalPending}]]</h5>
											</div>
											<div class="ms-auto text-white">	<i class='bx bx-cart font-30'></i>
											</div>
										</div>
										
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div>
												<p class="mb-0">Delivered Orders</p>
												<h5 class="mb-0" id="simplifiedCount">[[${totalDelivered}]]</h5>
											</div>
											<div class="ms-auto text-white">	<i class='bx bx-cart font-30'></i>
											</div>
										</div>
										
									</div>
								</div>
							</div>
							<div class="col">
								<div class="card radius-10 overflow-hidden">
									<div class="card-body">
										<div class="d-flex align-items-center">
											<div>
												<p class="mb-0">cancelled Orders</p>	
												<h5 class="mb-0" id="simplifiedCount">[[${totalCancelled}]]</h5>
											</div>
											<div class="ms-auto text-white">	<i class='bx bx-cart font-30'></i>
											</div>
										</div>
										
									</div>
								</div>
							</div>
						</div>
					
						
					
						<div class="card radius-10">
							<div class="card-body">
								<div class="d-flex align-items-center">
									<div>
										<h5 class="mb-0">Orders Summary</h5>
									</div>
									<div class="font-22 ms-auto"><i class='bx bx-dots-horizontal-rounded'></i>
									</div>
								</div>
								<hr/>
								<div class="table-responsive" style="overflow-y:scroll ; height: 400px; ">
									<table class="table align-middle mb-0">
										<thead class="table-light">
											<tr>
												<th>Order id</th>
												<th>Product</th>
												<th>Customer</th>
												<th>Date</th>
												<th>Price</th>
												<th>Qty</th>
												<th>Total Price</th>
												<th>Status</th>
												
											</tr>
										</thead>
										<tbody >
										<th:block th:unless="${srch}">
											<tr th:each="o:${orders}" >
												<td >[[${o.orderId}]]</td>
												<td>
													<div class="d-flex align-items-center">
														
														<div class="ms-2">
															<h6 class="mb-1 font-14">[[${o.product.title}]]</h6>
														</div>
													</div>
												</td>
												<td>[[${o.orderAddress.firstName+''+o.orderAddress.lastName}]]</td>
												<td>[[${o.orderDate}]]</td>
												<td>&#8377;[[${o.price}]]</td>
												<td>[[${o.quantity}]]</td>
												<td>&#8377;[[${o.quantity * o.price}]]</td>
												<td>
													<div class="d-grid">
														<a href="javascript:;" class="btn btn-sm btn-light radius-30">[[${o.status}]]</a>
													</div>
												</td>
												
											</tr>
											</th:block>
											
										</tbody>
									</table>
								</div>
							</div>
						</div>
					</div>
				</div>
				<script>
				    document.addEventListener("DOMContentLoaded", function() {
				        const incomeElement = document.getElementById("simplifiedCount");
				        const incomeValue = parseFloat(incomeElement.innerText.replace(/[^0-9.-]+/g,"")); // Extract the numeric value

				        incomeElement.innerText = formatIncome(incomeValue);
				    });

				    function formatIncome(amount) {
				        if (amount < 1000) {
				            return  amount; // Return the original amount
				        } else if (amount < 1000000) {
				            return   (amount / 1000).toFixed(1) + "K"; // Format in thousands
				        } else {
				            return (amount / 1000000).toFixed(1) + "M"; // Format in millions
				        }
				    }
				</script>
	</section>
</body>
</html>